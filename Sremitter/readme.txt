Модуль "Поделиться балансом" для биллинговой системы NoDeny 49.32

Умеет:

    * устанавливать количество возможностей пользования услугой в месяц (опционально)
    * устанавливать цену на услугу, снятие поисходит на стороне получателя (опционально)
    * устанавливать минимальную сумму перевода
    * устанавливать максимальную сумму перевода
    * запрещать отдельным пользователям пользоваться услугой (опционально)
    * защита от букв и прочих ненужных знаков и т.п. попыток хака
    * ведёт лог в "платежах и событиях", управляется там же
    * ведёт лог ошибок, если что-то с БД
    * документирован
    * настройки доступны из веб интерфейса администратора
    * включает клиента, если после перевода положительный баланс
    * многочисленные блокировки от злоупотреблений
    * защита от неплательщиков и должников

Инструкция по установке:

1. Загрузить Sremitter.pl на сервер в каталог:
/usr/local/nodeny/web

2. Вписать в /usr/local/nodeny/web/list.cfg следующее:
R -			-	'Поделиться балансом'
b RMTR_enable		0	'Да - модуль включен'
n RMTR_price		0	'Сумма списания за пользование услугой (0 - не учитывать)'
n RMTR_mnbap		0	'Минимальный баланс отправителя после перевода (0 - не учитывать)'
n RMTR_minsrc		0	'Минимальная сумма, которую может отправить один отправитель (0 - не учитывать)'
n RMTR_maxsrc		0	'Максимальная сумма, которую может отправить один отправитель (0 - не учитывать)'
n RMTR_maxdst		0	'Максимальная сумма, которую может получить получатель от всех отправителей суммарно за интервал (0 - не учитывать)'
n RMTR_ntrvlsrc		0	'Интервал блокировки для отправителя в сутках (0 - не учитывать)'
n RMTR_ntrvldst		0	'Интервал блокировки для получателя при достижении максимальной суммы в сутках (0 - не учитывать)'
n RMTR_dopid		0	'ID дополнительного параметра, для запрета пользования услугой конкретному клиенту (необходимо создать дополнительно в Операции - Настройки - Дополнительные поля, 0 - не учитывать)'
n RMTR_overdebt		0	'Максимальная сумма долга получателя, при которой запрещен перевод такому получателю (0 - не учитывать)'
n RMTR_oldpay		0	'Если платежей от получателя не поступало столько дней, запретить перевод такому получателю (0 - не учитывать)'

3. Прописать в реестре плагинов (файл /usr/local/nodeny/web/plugin_reestr.cfg), например так:
901		Sremitter		RMTR_main		Поделиться балансом			0		0
или если желаете, чтобы плагин был доступен только администраторам:
901		Sremitter		RMTR_main		Поделиться балансом			1		0

4. Браузером в биллинге зайти в Операции -> Настройки -> Список плагинов. Вписать где хочется
Sremitter

5. Браузером в биллинге зайти в Операции -> Настройки -> Поделиться балансом. Вписать желаемые данные и включить модуль.

